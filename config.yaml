# ========================================
# AI 自動交易系統配置文件
# ========================================
# API Keys 從 .env 環境變數讀取，不要寫在這裡

# Discord 設定
discord:
  monitored_channels:
    - id: "1384381529064476815"
      name: "大鏢客"
      analyst: "大鏢客"
      initial_weight: 1.0

    - id: "1237749772148801567"
      name: "三馬哥合約"
      analyst: "三馬哥"
      initial_weight: 1.0

    - id: "1229967087301033994"
      name: "幣圈所長課堂"
      analyst: "所長"
      initial_weight: 1.0

    - id: "1104301561892585543"
      name: "舒琴"
      analyst: "舒琴"
      initial_weight: 1.0

    - id: "1113105418663776316"
      name: "VIVI 比特幣分析"
      analyst: "VIVI-BTC"
      initial_weight: 1.0

    - id: "1179304542345642024"
      name: "VIVI 乙太幣"
      analyst: "VIVI-ETH"
      initial_weight: 1.0

    - id: "1113106196510035998"
      name: "VIVI短線交易"
      analyst: "VIVI-短線"
      initial_weight: 1.0


# Claude AI 設定
claude:
  model: "claude-sonnet-4-20250514"
  max_tokens: 4096
  temperature: 0.7

# Binance 設定
binance:
  testnet: true
  symbols:
    - "BTCUSDT"
    - "ETHUSDT"

# Telegram 設定（API Keys 從 .env 讀取）
telegram: {}

# 分析觸發條件
trigger:
  # 收到訊息後等待 60 秒，收集同時段其他分析師的訊息，然後一起送 AI 分析
  # 即使只有一則訊息也會觸發
  collect_window_seconds: 60

# 交易設定
trading:
  mode: "paper"              # "paper"（紙上交易，主網價格）或 "testnet"（幣安測試網）
  paper_balance: 10000       # 紙上交易虛擬餘額（USDT）
  enabled: true
  auto_execute: true
  confirmation_delay: 30

  # 只交易 BTC 和 ETH
  allowed_symbols:
    - "BTCUSDT"
    - "ETHUSDT"

  # 各幣種槓桿倍數
  leverage_map:
    BTCUSDT: 50
    ETHUSDT: 25
  default_leverage: 25

  # 手續費設定 (Binance Futures)
  fees:
    taker_rate: 0.0004         # Taker 手續費 0.04%（市價單）
    maker_rate: 0.0002         # Maker 手續費 0.02%（限價單）
    slippage: 0.0001           # 預估滑點 0.01%

  # 短線高頻參數
  min_confidence: 60           # 降低信心門檻，讓 AI 更積極進場
  min_risk_reward: 1.5         # 短線交易 RR 1.5 即可
  max_position_size: 5.0       # 每筆最多 5% 倉位（AI 根據信心自行決定 1-5%）
  max_positions: 2             # 最多同時持 2 倉（BTC + ETH 各一）
  max_daily_trades: 20         # 短線高頻，不限制次數（贏就繼續開）
  max_daily_loss: 15.0         # 每日最大虧損 15%
  max_consecutive_losses: 3    # 連輸 3 次當日停止交易
  confirmation_delay: 15       # 確認時間縮短到 15 秒（快進快出）

# 風控硬限制（AI 無法修改）
risk_limits:
  absolute_max_position: 5.0   # 單筆倉位不超過 5%
  absolute_max_daily_loss: 20.0  # 日虧硬上限 20%（超過直接停止）
  emergency_stop_loss: 40.0    # 總帳戶虧 40% 緊急停止一切交易
  cooldown_minutes: 5          # 冷卻縮短到 5 分鐘（短線需要快速反應）

# 市場掃描器設定（主動掃描市場，結合分析師觀點尋找入場機會）
market_scanner:
  enabled: true
  interval_seconds: 300         # 每 5 分鐘掃描一次（高頻策略）
  lookback_hours: 4             # 回看最近 4 小時內的分析師訊息
  min_cooldown_seconds: 600    # 任何 AI 分析後至少冷卻 10 分鐘
  min_analyst_messages: 1       # 至少要有 1 則相關分析師訊息才觸發

# 定時報告設定
schedule:
  timezone: "America/Los_Angeles"
  morning_hour: 8         # 每天早上 8:00 發送早報
  evening_hour: 22        # 每天晚上 10:00 發送晚報

# 訊息品質評分（Claude Haiku 預篩選）
message_scoring:
  enabled: true
  min_score: 4                      # 低於此分數的訊息會被過濾
  model: "claude-haiku-4-5-20251001"

# AI 學習設定
learning:
  enabled: true
  min_trades_before_learning: 10
  analyst_weight_update_frequency: 1
  parameter_optimization_frequency: 50
  pattern_analysis_frequency: 20

  weight_decay: 0.95
  performance_weight: 0.7
  recency_weight: 0.3

  # 分析師試用期
  trial_period_calls: 10            # 前 N 筆交易為試用期
  trial_period_discount: 0.5        # 試用期權重折扣

# 通知設定
notifications:
  notify_on_signal: true
  notify_on_entry: true
  notify_on_exit: true
  notify_on_learning: true
  daily_summary: true
  weekly_report: true

# 數據庫設定
database:
  path: "./data/trades.db"
  backup_frequency: 86400

# 日誌設定
logging:
  level: "INFO"
  file: "./logs/system.log"
  max_size_mb: 100
  backup_count: 5
